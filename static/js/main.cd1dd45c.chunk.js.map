{"version":3,"sources":["redux/auth-reducer.js","serviceWorker.js","redux/sidebar-reducer.js","redux/app-reducer.js","redux/redux-store.js","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","components/Navbar/Navbar.jsx","hoc/withSuspense.jsx","App.jsx","index.js","components/Header/Header.module.css","components/common/Preloader/Preloader.jsx","utils/object-helpers.js","redux/users-reducer.js","api/api.js","components/Users/Users.module.css","redux/profile-reducer.js","assets/user.svg","redux/dialogs-reducer.js","components/Navbar/Navbar.module.css","components/common/Preloader/Preloader.module.css","assets/preloader.svg"],"names":["initialState","userId","email","login","isAuth","captchaUrl","photos","API_KEY","authReducer","state","action","type","payload","setAuthUserdata","getCaptchaUrlSuccess","setPhotosMeSuccess","setAuthUserdataThunk","withCredentials","dispatch","a","authAPI","me","response","data","resultCode","id","setApiKeyThunk","then","setPhotosMeThunk","password","rememberMe","captcha","getCaptchaUrlThunk","message","messages","length","stopSubmit","_error","logout","securityAPI","getCaptchaUrl","url","myId","photoMe","setApiKeyApi","Boolean","window","location","hostname","match","initialized","reducers","combineReducers","profilePage","profileReducer","dialogsPage","dialogsReducer","sidebar","usersPage","usersReducer","auth","form","formReducer","app","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","__store__","Header","props","className","s","header","to","photosMe","headerPreloaderBlock","Preloader","loginBlock","headerImgIconA","src","small","iconImg","alt","loginBlockLine","logoutBlock","headerButton","onClick","mapDispatchToProps","connect","authorizedUserId","useState","setPhotosMe","useEffect","Navbar","nav","item","activeClassName","active","withSuspense","Component","preloader","suspensePreloaderBlock","suspensePreloader","Suspense","fallback","ProfileContainer","React","lazy","DialogsContainer","UsersContainer","LoginPage","AppContainer","catchAllUnhandleErrors","reason","promise","console","log","this","initializeApp","addEventListener","removeEventListener","exact","from","path","render","Promise","all","App","withRouter","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports","loader","updateObjectArray","items","itemId","objPropname","newObjProps","map","u","FOLLOW","users","pageSize","totalUsersCount","currentPage","isFetching","followingInProgress","followed","count","filter","followSuccess","unfollowSuccess","setCurrentPage","toggleIsFetching","toggleFollowingProgress","requestUsers","page","tf","usersAPI","getUsers","totalCount","followUnfollowFlow","apiMethod","actionCreator","follow","bind","unfollow","API_KEYs","setInstance","baseURL","headers","instance","axios","get","post","delete","profileAPI","getProfile","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","saveProfile","profile","ADD_POST","posts","likesCount","newPost","newPostText","p","postId","addPostActionCreator","setUserProfile","setStatus","setUserProfileThunk","catch","reject","getStatusThunk","updateStatusThunk","savePhotoThunk","file","saveProfileThunk","getState","messagesData","dialogsData","name","body","newMessageBody","sendMessageCreator"],"mappings":"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","file":"static/js/main.cd1dd45c.chunk.js","sourcesContent":["import {authAPI, securityAPI, setApiKeyApi} from '../api/api';\r\nimport {stopSubmit} from 'redux-form';\r\n\r\n\r\nconst SET_USER_DATA = 'auth/SET_USER_DATA';\r\nconst GET_CAPTCHA_SUCCESS = 'auth/GET_CAPTCHA_SUCCESS';\r\nconst SET_PHOTOS_ME_SUCCESS = 'auth/SET_PHOTOS_ME_SUCCESS';\r\n// const SET_APIKEY_SUCCESS = 'auth/SET_APIKEY_SUCCESS';\r\n\r\nexport let initialState = {\r\n\tuserId: null,\r\n\temail: null,\r\n\tlogin: null,\r\n\tisAuth: false,\r\n\tcaptchaUrl: null,\r\n\tphotos: null,\r\n\tAPI_KEY: null\r\n}\r\n\r\nexport const authReducer = (state = initialState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase SET_USER_DATA:\r\n\t\tcase GET_CAPTCHA_SUCCESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SET_PHOTOS_ME_SUCCESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload\r\n\t\t\t};\r\n\t\t}\r\n\t\t// case SET_APIKEY_SUCCESS: {\r\n\t\t// \treturn {\r\n\t\t// \t\t...state,\r\n\t\t// \t\t...action.payload\r\n\t\t// \t};\r\n\t\t// }\r\n\t\tdefault: \r\n\t\t  return state;\r\n\t}\r\n}\r\n\r\n\r\nconst setAuthUserdata = (userId, email, login, isAuth, captchaUrl, photos) => ({\r\n type: SET_USER_DATA, payload: {userId, email, login, isAuth, captchaUrl, photos}\r\n});\r\nconst getCaptchaUrlSuccess = (captchaUrl) => ({\r\n\ttype: GET_CAPTCHA_SUCCESS, payload: {captchaUrl}\r\n});\r\nconst setPhotosMeSuccess = (photos) => ({\r\n\ttype: SET_PHOTOS_ME_SUCCESS, payload: {photos}\r\n});\r\n\r\n\r\nexport const setAuthUserdataThunk = (withCredentials) => async (dispatch) =>{\r\n\tlet response = await authAPI.me(withCredentials);\r\n\tif (response.data.resultCode === 0) {\r\n\t\tlet {id, email, login} = response.data.data;\r\n\t\tdispatch(setApiKeyThunk(email))\r\n\t\t.then(\r\n\t\t\tdispatch(setAuthUserdata(id, email, login, true, null)),\r\n\t\t\tdispatch(setPhotosMeThunk(id, true))\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport const login = (email, password, rememberMe, withCredentials, captcha) => async (dispatch) => {\r\n\tlet response = await authAPI.login(email, password, rememberMe, withCredentials, captcha);\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(setAuthUserdataThunk(true));\r\n\t} else {\r\n\t\tif(response.data.resultCode === 10) {\r\n\t\t\tdispatch(getCaptchaUrlThunk());\r\n\t\t}\r\n\t\tlet message = (response.data.messages.length > 0) \r\n\t\t\t? response.data.messages[0]\r\n\t\t\t: \"Some error\";\r\n\t\tlet action = stopSubmit(\"login\", {_error: message});\r\n\t\tdispatch(action);\r\n\t}\r\n}\r\n\r\nexport const logout = () => async (dispatch) => {\r\n\tlet response = await authAPI.logout();\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(setAuthUserdata(null, null, null, false, null, null));\r\n\t}\r\n}\r\n\r\nexport const getCaptchaUrlThunk = () => async (dispatch) => {\r\n\tconst response = await securityAPI.getCaptchaUrl();\r\n\tconst captchaUrl = response.data.url;\r\n\tdispatch(getCaptchaUrlSuccess(captchaUrl));\r\n}\r\n\r\nexport const setPhotosMeThunk = (myId, withCredentials = true) => async (dispatch) =>{\r\n\tlet response = await authAPI.photoMe(myId, withCredentials);\r\n\tdispatch(setPhotosMeSuccess(response.data.photos));\r\n}\r\n\r\nexport const setApiKeyThunk = (email) => async (dispatch) =>{\r\n\tlet API_KEY = null;\r\n\tif  (email === \"alb.adm.ru@gmail.com\") {\r\n\t\tAPI_KEY = '2f32f390-ae96-4e22-896c-29147e6b5143';\r\n\t} else if (email === \"siseros589@mailhub.pro\") {\r\n\t\tAPI_KEY = 'f4f61e33-1fba-45aa-93ff-8559cf05e371';\r\n\t}\r\n\tsetApiKeyApi(API_KEY);\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","let initialState = {\r\n\t\r\n}\r\n\r\nexport const sidebarReducer = (state = initialState, action) => {\r\n\treturn state;\r\n}","import {setAuthUserdataThunk} from './auth-reducer';\r\n\r\n\r\nconst INITIALIZED_SUCCESS = 'app/INITIALIZED_SUCCESS';\r\n\r\nlet initialState = {\r\n\tinitialized: false\r\n\t// globalError: null\r\n}\r\n\r\nexport const appReducer = (state = initialState, action) => {\r\n switch(action.type) {\r\n \tcase INITIALIZED_SUCCESS: {\r\n\t  return {\r\n\t  \t...state,\r\n\t  \tinitialized: true\r\n\t  };\r\n\t }\r\n\t default: \r\n\t  return state;\r\n }\r\n}\r\n\r\n\r\nexport const initializedSuccess = () => ({\r\n type: INITIALIZED_SUCCESS\r\n});\r\n\r\nexport const initializeApp = () => {\r\n\treturn (dispatch) => {\r\n\t\tlet promise = dispatch(setAuthUserdataThunk(true));\r\n\t\tPromise.all([promise])\r\n\t\t.then(() => {\r\n      dispatch(initializedSuccess());\r\n\t\t});\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n","import {createStore, combineReducers,\r\n applyMiddleware, compose} from 'redux';\r\nimport {profileReducer} from './profile-reducer';\r\nimport {dialogsReducer} from './dialogs-reducer';\r\nimport {sidebarReducer} from './sidebar-reducer';\r\nimport {usersReducer} from './users-reducer';\r\nimport {authReducer} from './auth-reducer';\r\nimport {appReducer} from './app-reducer';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport {reducer as formReducer} from 'redux-form';\r\n\r\n\r\nlet reducers = combineReducers({\r\n\tprofilePage: profileReducer,\r\n\tdialogsPage: dialogsReducer,\r\n\tsidebar: sidebarReducer,\r\n\tusersPage: usersReducer,\r\n\tauth: authReducer,\r\n\tform: formReducer,\r\n\tapp: appReducer\r\n});\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers,composeEnhancers(applyMiddleware(thunkMiddleware)));\r\nwindow.__store__ = store;\r\n\r\n\r\nexport default store;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport s from './Header.module.css';\r\nimport {NavLink, Redirect} from 'react-router-dom';\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport iconImg from '../../assets/user.svg';\r\n\r\n\r\nconst Header = (props) => {  \r\n  return (\r\n   <header className={s.header}>\r\n     {(!props.isAuth) && <Redirect to={'/login'} />}\r\n  \r\n     {props.isAuth \r\n     ? ((!props.photosMe && <div className={s.headerPreloaderBlock}><Preloader /></div>) || <div className={s.loginBlock}>\r\n       <NavLink className={s.headerImgIconA} to={\"/profile\"}> <img src={props.photosMe.small  !== null \r\n        ? props.photosMe.small\r\n        : iconImg } \r\n        alt=\"header-img\"/> </NavLink> \r\n        <div className={s.loginBlockLine}> - </div> <NavLink to={\"/profile\"}>{props.login}</NavLink></div>) \r\n     : <div></div>}     \r\n\r\n     <div className={s.logoutBlock}>\r\n      { props.isAuth \r\n          ? <div>\r\n              <button className={s.headerButton} onClick={() => {props.logout()}}>Logout</button>\r\n            </div>\r\n          : <NavLink to={'/login'}>Login</NavLink>\r\n      }\r\n     </div>\r\n   </header>\r\n  );\r\n}\r\n\r\n\r\nexport default Header;","import React, {useState, useEffect} from 'react';\r\nimport Header from './Header';\r\nimport {connect} from 'react-redux';\r\nimport {logout, setPhotosMeThunk} from '../../redux/auth-reducer';\r\n\r\n\r\nconst HeaderContainer = (props) => {\r\n  let [photosMe, setPhotosMe] = useState(props.photosMe);\r\n  let setPhotosMeThunk = props.setPhotosMeThunk;\r\n\r\n  useEffect(() => {\r\n    if(!photosMe) {\r\n      setPhotosMe(props.photosMe)\r\n      setPhotosMeThunk(props.authorizedUserId, true);\r\n    }\r\n  }, [props.photosMe, photosMe, props.authorizedUserId, setPhotosMeThunk]);\r\n\r\n  return (\r\n    <Header {...props}/>\r\n  );\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    isAuth: state.auth.isAuth,\r\n    login: state.auth.login,\r\n    authorizedUserId: state.auth.userId,\r\n    photosMe: state.auth.photos\r\n  }\r\n}\r\nlet mapDispatchToProps = {\r\n logout,\r\n setPhotosMeThunk\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderContainer);\r\n\r\n","import React from 'react';\r\nimport s from './Navbar.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\n\r\nconst Navbar = () => {\r\n  return (\r\n   <nav className={s.nav}>\r\n     <ul>\r\n      <li className={`${s.item}`}><NavLink activeClassName={s.active} to=\"/profile\">Profile</NavLink></li>\r\n      <li className={s.item}><NavLink activeClassName={s.active} to=\"/dialogs\">Messages</NavLink></li>\r\n      <li className={s.item}><NavLink activeClassName={s.active} to=\"/users\">Users</NavLink></li>\r\n      <li className={s.item}><NavLink activeClassName={s.active} to=\"/news\">News</NavLink></li>\r\n      <li className={s.item}><NavLink activeClassName={s.active} to=\"/music\">Music</NavLink></li>\r\n      <li className={s.item}><NavLink activeClassName={s.active} to=\"/settings\">Settings</NavLink></li>\r\n     </ul>\r\n   </nav>\r\n  );\r\n}\r\n\r\n\r\nexport default Navbar;","import React from 'react';\r\nimport Preloader from '../components/common/Preloader/Preloader';\r\nimport s from '../components/Users/Users.module.css';\r\n\r\n\r\nlet withSuspense = (Component) => (props) =>{\r\n  let preloader = <div className={s.suspensePreloaderBlock}>\r\n                    <div className={s.suspensePreloader}>\r\n                      <Preloader />\r\n                    </div>\r\n                  </div>;\r\n  return (\r\n    <React.Suspense fallback={preloader}>\r\n      <Component {...props} />      \r\n    </React.Suspense>\r\n  );\r\n}\r\n\r\n\r\nexport default withSuspense;","import React from 'react';\nimport './App.css';\nimport HeaderContainer from './components/Header/HeaderContainer';\nimport Nav from './components/Navbar/Navbar';\nimport {Route, Switch} from 'react-router-dom';\nimport {initializeApp} from './redux/app-reducer'; \nimport {connect} from 'react-redux';\nimport {compose} from 'redux';\nimport {withRouter, Redirect} from 'react-router-dom';\nimport withSuspense from './hoc/withSuspense';\nimport Preloader from './components/common/Preloader/Preloader';\n\n\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'));\nconst LoginPage = React.lazy(() => import('./components/Login/Login'));\n\n\nclass AppContainer extends React.Component {\n  catchAllUnhandleErrors = (reason, promise) => {\n    console.log(\"Error! Reason: \" + reason);\n  }\n\n  componentDidMount() {\n    this.props.initializeApp();\n    window.addEventListener(\"unhandledrejection\", this.catchAllUnhandleErrors);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"unhandledrejection\", this.catchAllUnhandleErrors);\n  }\n\n  render(){\n    if(!this.props.initialized) {\n      return (\n        <div className={\"appPreloaderBlock\"}>\n          <div className={\"appPreloader\"}>\n            <Preloader />\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <div className='appMainWrapperContent'>\n\n        <div className={\"appTextMobileBlockWrap\"}>\n          <div className={\"appTextMobileBlock\"}>\n              <div className={\"appTextMobile\"}>Hello, this site is not available for viewing on tablet or mobile devices. <div>If you want to still see this site, access it through your computer! <span>:)</span></div> </div>\n          </div>\n        </div>\n\n        <div className={\"app-wrapper\"}><HeaderContainer />\n          <Nav />\n          <div className=\"app-wrapper-content\">\n            <Switch>\n              <Redirect exact from=\"/\" to=\"/profile\" />\n              <Route path=\"/profile/:userId?\" render={withSuspense(() => <ProfileContainer />)}/>\n              <Route path=\"/dialogs\" render={withSuspense(() => <DialogsContainer />)}/>  \n              <Route path=\"/users\" render={withSuspense(() => <UsersContainer />)}/> \n              <Route path=\"/login\" render={withSuspense(() => <LoginPage />)}/> \n              <Route path=\"*\" render={() =>(<div className={\"error404\"}>404: NOT FOUND</div>)}/> \n            </Switch>\n          </div>\n        </div>  \n\n      </div>\n    );\n  }\n}\n\n\nlet mapStateToProps = (state) => {\n  return {\n    initialized: state.app.initialized\n  }\n}\nlet mapDispatchToProps = {\n  initializeApp\n}\n\n\nconst App  = compose(\n  withRouter,\n  connect(mapStateToProps, mapDispatchToProps)\n)(AppContainer)\n\nexport default App;\n","import * as serviceWorker from './serviceWorker';\nimport store from './redux/redux-store';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {Provider} from 'react-redux';\nimport {HashRouter} from 'react-router-dom';\n\n\nReactDOM.render(\n\t<HashRouter>\n\t\t<Provider store={store}>\n\t\t  <App/>\n\t\t</Provider>\n\t</HashRouter>, document.getElementById('root')\n); // используем в данном случае (пока так) HashRouter для правильной работы URL в браузере на хостинге, вместо BrowserRouter: (<BrowserRouter basename=\"/appReact\">)\n\n\n\n\n\n\n\n/* let rerenderEntireTree = (state) => {\n\tReactDOM.render(\n\t\t<BrowserRouter>\n\t\t\t<Provider store={store}>\n\t\t\t <App store={store} dispatch={store.dispatch.bind(store)}/>\n\t\t\t</Provider>\n\t\t</BrowserRouter>, document.getElementById('root')\n\t);\n}\n\nrerenderEntireTree(store.getState());\nstore.subscribe(() => {\n let state = store.getState();\n\trerenderEntireTree(state);\n}); */\n\n\n/*\n  \n Это мы написали свой provider, сейчас используем из библиотеки react-redux\n\n import React from 'react';\n const StoreContext = React.createContext(null);\n\n export const Provider = (props) => {\n \treturn (\n \t\t<StoreContext.Provider value={props.store}>\n \t\t\t{\n \t\t\t props.children\n \t\t\t}\n \t\t</StoreContext.Provider>\t\n \t);\n }\n\n export default StoreContext;\n*/\n\n\n\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2591E\",\"headerButton\":\"Header_headerButton__2SlBb\",\"loginBlock\":\"Header_loginBlock__21Qml\",\"loginBlockLine\":\"Header_loginBlockLine__3lZMK\",\"logoutBlock\":\"Header_logoutBlock__2fHrk\",\"headerImgIconA\":\"Header_headerImgIconA__1LZn8\",\"headerPreloaderBlock\":\"Header_headerPreloaderBlock__tz0kN\"};","import React from 'react';\r\nimport s from './Preloader.module.css';\r\nimport preloader from '../../../assets/preloader.svg';\r\n\r\nlet Preloader = (props) => {\r\n\treturn (\r\n    <div className={s.loader}>\r\n      <img src={preloader} alt=\"preloader\"/>\r\n    </div>\r\n\t);\r\n}\r\n\r\n\r\nexport default Preloader;","\r\nexport const updateObjectArray = (items, itemId, objPropname, newObjProps) => {\r\n  return items.map(u => {\r\n    if(u[objPropname] === itemId) {\r\n      return {...u, ...newObjProps};\r\n    } else {\r\n      return u;\r\n    }\r\n  });\r\n}\r\n\r\n","import {usersAPI} from '../api/api';\r\nimport {updateObjectArray} from '../utils/object-helpers';\r\n\r\n\r\nconst FOLLOW = 'users/FOLLOW';\r\nconst UNFOLLOW = 'users/UNFOLLOW';\r\nconst SET_USERS = 'users/SET_USERS';\r\nconst SET_CURRENT_PAGE = 'users/SET_CURRENT_PAGE';\r\nconst SET_TOTAL_USERS_COUNT = 'users/SET_TOTAL_USERS_COUNT';\r\nconst TOGGLE_IS_FETCHING = 'users/TOGGLE_IS_FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'users/TOGGLE_IS_FOLLOWING_PROGRESS';\r\n\r\nlet initialState = {\r\n\tusers: [],\r\n\tpageSize: 5,\r\n\ttotalUsersCount: 0,\r\n\tcurrentPage: 1,\r\n\tisFetching: true,\r\n  followingInProgress: []\r\n}\r\n\r\nexport const usersReducer = (state = initialState, action) => {\r\n switch(action.type) {\r\n \tcase FOLLOW: {\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\tusers: updateObjectArray(state.users, action.userId, \"id\", {followed: true})\r\n\t\t};\r\n\t }\r\n\t case UNFOLLOW: {\r\n\t  return {\r\n\t\t\t...state,\r\n\t\t\tusers: updateObjectArray(state.users, action.userId, \"id\", {followed: false})\r\n\t\t}\r\n\t }\r\n\t case SET_USERS: {\r\n\t  return {\r\n\t  \t...state,\r\n\t  \tusers: action.users\r\n\t  };\r\n\t }\r\n\t case SET_CURRENT_PAGE: {\r\n\t  return {\r\n\t  \t...state,\r\n\t  \tcurrentPage: action.currentPage\r\n\t  };\r\n\t }\r\n\t case SET_TOTAL_USERS_COUNT: {\r\n\t  return {\r\n\t  \t...state,\r\n\t  \ttotalUsersCount: action.count\r\n\t  };\r\n\t }\r\n\t case TOGGLE_IS_FETCHING: {\r\n\t  return {\r\n\t  \t...state,\r\n\t  \tisFetching: action.isFetching\r\n\t  };\r\n\t }\r\n\t case TOGGLE_IS_FOLLOWING_PROGRESS: {\r\n\t  return {\r\n\t  \t...state,\r\n\t\t\tfollowingInProgress: action.followingInProgress \r\n\t\t\t? [...state.followingInProgress, action.userId] \r\n\t\t\t: [state.followingInProgress.filter(id => id !== action.userId)]\r\n\t  };\r\n\t }\r\n\t default: \r\n\t  return state;\r\n }\r\n}\r\n\r\n\r\nconst followSuccess = (userId) => ({\r\n type: FOLLOW, userId \r\n});\r\nconst unfollowSuccess = (userId) => ({ \r\n\ttype: UNFOLLOW, userId\r\n});\r\nconst setUsers = (users) => ({ \r\n\ttype: SET_USERS, users\r\n});\r\nexport const setCurrentPage = (currentPage) => ({ \r\n\ttype: SET_CURRENT_PAGE, currentPage\r\n});\r\nexport const setTotalUsersCount = (totalUsersCount) => ({\r\n\ttype: SET_TOTAL_USERS_COUNT, count: totalUsersCount\r\n});\r\nexport const toggleIsFetching = (isFetching) => ({ \r\n\ttype: TOGGLE_IS_FETCHING, isFetching\r\n});\r\nexport const toggleFollowingProgress = (followingInProgress, userId) => ({ \r\n\ttype: TOGGLE_IS_FOLLOWING_PROGRESS, followingInProgress, userId\r\n});\r\n\r\n\r\nexport const requestUsers = (page, pageSize, tf) => async (dispatch) => {\r\n\tdispatch(toggleIsFetching(true));\r\n\tdispatch(setCurrentPage(page));\r\n\tlet data = await usersAPI.getUsers(page, pageSize, tf);\r\n\tdispatch(setUsers(data.items));\r\n\tdispatch(setTotalUsersCount(data.totalCount));\r\n\tdispatch(toggleIsFetching(false));\r\n}\r\n\r\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\r\n\tdispatch(toggleFollowingProgress(true, userId));\r\n\tlet response = await apiMethod(userId);\r\n\tif(response.data.resultCode === 0) {\r\n\t\tdispatch(actionCreator(userId));\r\n\t\tdispatch(toggleFollowingProgress(false, userId));\r\n\t}\r\n}\r\n\r\nexport const follow = (userId) => async (dispatch) => {\r\n\tfollowUnfollowFlow(dispatch, userId, \r\n\t\tusersAPI.follow.bind(usersAPI), followSuccess);\r\n}\r\n\r\nexport const unfollow = (userId) => async (dispatch) => {\r\n\tfollowUnfollowFlow(dispatch, userId, \r\n\t\tusersAPI.unfollow.bind(usersAPI), unfollowSuccess);\t\r\n}\r\n\r\n\r\n","import * as axios from 'axios';\r\n\r\n\r\nlet API_KEYs = null;\r\nlet setInstance = () => {\r\n  return {\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    withCredentials: true,\r\n    headers: {\r\n      'API-KEY': `${API_KEYs}`\r\n    }\r\n  }\r\n}\r\nlet instance = axios.create(\r\n  setInstance()\r\n);\r\n\r\nexport let setApiKeyApi = (API_KEY) => {\r\n  API_KEYs = API_KEY;\r\n  return instance = axios.create(\r\n    setInstance()\r\n  );\r\n}\r\n\r\nexport const usersAPI = {\r\n  getUsers (currentPage = 1, pageSize = 10, withCredentials = true) {\r\n    return (\r\n     instance.get(`users?page=${currentPage}&count=${pageSize}`, {\r\n       withCredentials: withCredentials\r\n     }).then(response => response.data)\r\n    );\r\n  },\r\n  follow(userId) {\r\n    return instance.post(`follow/${userId}`);\r\n  },\r\n  unfollow(userId) {\r\n    return instance.delete(`follow/${userId}`);\r\n  }\r\n}\r\n\r\nexport const authAPI = {\r\n  me(withCredentials) {\r\n    return instance.get(`auth/me`, {\r\n      withCredentials: withCredentials\r\n    });\r\n  },\r\n  photoMe(myId, withCredentials) {\r\n    return instance.get(`/profile/${myId}`, {\r\n      withCredentials: withCredentials\r\n    });\r\n  },\r\n  login(email, password, rememberMe = false, withCredentials, captcha = null) {\r\n    return instance.post(`auth/login`, {\r\n      email, password, rememberMe, withCredentials, captcha\r\n    });\r\n  },\r\n  logout() {\r\n    return instance.delete(`auth/login`);\r\n  },\r\n}\r\n\r\nexport const profileAPI  = {\r\n  getProfile(userId) {\r\n    return instance.get(`profile/${userId}`);\r\n  },\r\n  getStatus(userId) {\r\n    return instance.get(`profile/status/${userId}`);    \r\n  },\r\n  updateStatus(status) {\r\n    return instance.put(`profile/status/`, {status: status});    \r\n  },\r\n  savePhoto(photoFile) {\r\n    const formData = new FormData();\r\n    formData.append(\"image\", photoFile);\r\n    return instance.put(`profile/photo/`, formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    });    \r\n  },\r\n  saveProfile(profile) {\r\n    return instance.put(`profile/`, profile);\r\n  }\r\n}\r\n\r\nexport const securityAPI = {\r\n  getCaptchaUrl() {\r\n    return instance.get(`security/get-captcha-url`);\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__2uK85\",\"User\":\"Users_User__dUQa0\",\"UserImg\":\"Users_UserImg__qybXb\",\"UserInfo\":\"Users_UserInfo__4XFcy\",\"UserName\":\"Users_UserName__3dnxM\",\"UserStatus\":\"Users_UserStatus__GQiVF\",\"UserFollow\":\"Users_UserFollow__3ZwaE\",\"UserFollowUnfol\":\"Users_UserFollowUnfol__37z_j\",\"UserFollowFol\":\"Users_UserFollowFol__MAeLW\",\"usersPreloader\":\"Users_usersPreloader__2_YUI\",\"usersPreloaderBlock\":\"Users_usersPreloaderBlock__Ly-nY\",\"usersWrapper\":\"Users_usersWrapper__3e7c2\",\"suspensePreloaderBlock\":\"Users_suspensePreloaderBlock__2niDh\",\"suspensePreloader\":\"Users_suspensePreloader__Bmf8p\"};","import {profileAPI} from '../api/api';\r\nimport {stopSubmit} from 'redux-form';\r\nimport {toggleIsFetching} from './users-reducer';\r\nimport {setPhotosMeThunk} from './auth-reducer';\r\n\r\n\r\nconst ADD_POST = 'profile/ADD-POST';\r\nconst SET_USER_PROFILE = 'profile/SET_USER_PROFILE';\r\nconst SET_STATUS = 'profile/SET_STATUS';\r\nconst DELETE_POST = 'profile/DELETE_POST';\r\nconst SAVE_PHOTO_SUCCESS = 'profile/SAVE_PHOTO_SUCCESS';\r\n\r\nlet initialState = {\r\n\tposts: [\r\n  {id: 1, message: 'Hi, how are you?', likesCount: 12},\r\n  {id: 2, message: 'It is my first post', likesCount: 22},\r\n  {id: 3, message: 'Good', likesCount: 14},\r\n  {id: 4, message: 'BB', likesCount: 16}\r\n\t],\r\n\tprofile: null,\r\n\tstatus: \"\"\r\n}\t\t  \r\n\t\t\t\r\nexport const profileReducer = (state = initialState, action) => {\r\n switch(action.type) {\r\n \tcase ADD_POST: {\r\n\t  let newPost = {\r\n\t   id: state.posts.length + 1,\r\n\t   message: action.newPostText,\r\n\t   likesCount: 0\r\n\t  }\r\n\t  return {\r\n\t  \t...state,\r\n\t  \tposts: [...state.posts, newPost],\r\n\t  \tnewPostText: ''\r\n\t  };\r\n\t }\r\n\t case SET_USER_PROFILE: {\r\n\t  return {\r\n\t  \t...state,\r\n\t  \tprofile: action.profile\r\n\t  }; \r\n\t }\r\n\t case SET_STATUS: {\r\n\t  return {\r\n\t  \t...state,\r\n\t  \tstatus: action.status\r\n\t  }; \r\n\t }\r\n\t case DELETE_POST: {\r\n\t  return {\r\n\t  \t...state,\r\n\t  \tposts: state.posts.filter(p => p.id !== action.postId)\r\n\t  }; \r\n\t }\r\n\t case SAVE_PHOTO_SUCCESS: {\r\n\t  return {\r\n\t\t\t...state,\r\n\t\t\tprofile: {...state.profile, photos: action.photos}\r\n\t  }; \r\n\t }\r\n\t default: \r\n\t  return state;\r\n }\r\n}\r\n\r\n\r\nexport const addPostActionCreator = (newPostText) => ({\r\n type: ADD_POST, newPostText\r\n});\r\nexport const setUserProfile = (profile) => ({ \r\n\ttype: SET_USER_PROFILE, profile \r\n});\r\nconst setStatus = (status) => ({ \r\n\ttype: SET_STATUS, status \r\n});\r\nexport const deletePost = (postId) => ({ // используется для теста в PR\t\r\n\ttype: DELETE_POST, postId \r\n});\r\nexport const savePhotoSuccess = (photos) => ({ \r\n\ttype: SAVE_PHOTO_SUCCESS, photos \r\n});\r\n\r\n\r\nexport const setUserProfileThunk = (userId) => async (dispatch) => {\r\n\tdispatch(toggleIsFetching(true));\r\n\tlet response = await profileAPI.getProfile(userId)\r\n\t.catch((response)=>{\r\n\t\tdispatch(setUserProfile(response.data));\r\n\t\t dispatch(toggleIsFetching(false));\r\n\t\treturn Promise.reject(response.response.data.message);\r\n\t});\r\n\tdispatch(setUserProfile(response.data));\r\n\tdispatch(toggleIsFetching(false));\r\n}\r\n\r\nexport const getStatusThunk = (userId) => async (dispatch) => {\r\n\tlet response = await profileAPI.getStatus(userId);\r\n\tdispatch(setStatus(response.data));\r\n}\r\n\r\nexport const updateStatusThunk = (status) => async (dispatch) => {\r\n\ttry {\r\n\t\tlet response = await profileAPI.updateStatus(status);\r\n\t\tif(response.data.resultCode === 0) {\r\n\t\t\tdispatch(setStatus(status));\r\n\t\t} else {\r\n\t\t\treturn Promise.reject(response.data.messages[0]);\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log(error);\r\n\t}\r\n}\r\n\r\nexport const savePhotoThunk = (file, myId) => async (dispatch) => {\r\n\tlet response = await profileAPI.savePhoto(file);\r\n\tif(response.data.resultCode === 0) {\r\n\t\tdispatch(savePhotoSuccess(response.data.data.photos));\r\n\t\tdispatch(setPhotosMeThunk(myId, true));\r\n\t}\r\n}\r\n\r\nexport const saveProfileThunk = (profile) => async (dispatch, getState) => {\r\n\tconst userId = getState().auth.userId;\r\n\tlet response = await profileAPI.saveProfile(profile);\r\n\tif(response.data.resultCode === 0) {\r\n\t\tdispatch(setUserProfileThunk(userId));\r\n\t} else {\r\n\t\t// let action = stopSubmit(\"edit-profile\", {\"contacts\": {\"facebook\": response.data.messages[0]}}); // выводит ошибку у конкретного поля\r\n\t\tlet action = stopSubmit(\"edit-profile\", {_error: \"Error! Please check the entered data!\"});\r\n\t\tdispatch(action);\r\n\t\treturn Promise.reject(response.data.messages[0]);\r\n\t}\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/user.316d47a9.svg\";","const SEND_MESSAGE = 'dialogs/SEND_MESSAGE';\r\n\r\nlet initialState = {\r\n\tmessagesData: [\r\n\t {id: 1, message: 'Hi'},\r\n\t {id: 2, message: 'How are you doing?'}, \r\n\t {id: 3, message: 'GG'}, \r\n\t {id: 4, message: 'GG'}, \r\n\t {id: 5, message: 'GG'}, \r\n\t {id: 6, message: 'GG'}\r\n\t],\r\n\tdialogsData: [\r\n\t {id: 1, name: 'Dimych'},\r\n\t {id: 2, name: 'Andrey'}, \r\n\t {id: 3, name: 'Sveta'}, \r\n\t {id: 4, name: 'Sasha'}, \r\n\t {id: 5, name: 'Valera'}, \r\n\t {id: 6, name: 'Albert'}\r\n\t]\r\n}\r\n\r\nexport const dialogsReducer = (state = initialState, action) => {\r\n switch(action.type) {\r\n\t case SEND_MESSAGE: \r\n\t\tlet body = action.newMessageBody;\r\n\t  return {\r\n\t  \t...state,\r\n\t  \tmessagesData: [...state.messagesData, {id: state.messagesData.length + 1, message: body}], // это новый синтаксис пуша эдемента в массив (push)\r\n\t  };\r\n\t default: \r\n\t  return state;\r\n }\r\n}\r\n\r\nexport const sendMessageCreator = (newMessageBody) => ({\r\n type: SEND_MESSAGE, newMessageBody\r\n});","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__1kCje\",\"item\":\"Navbar_item__30etw\",\"active\":\"Navbar_active__Iz_6D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Preloader_loader__29Yw2\"};","module.exports = __webpack_public_path__ + \"static/media/preloader.eb09f74a.svg\";"],"sourceRoot":""}