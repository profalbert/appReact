{"version":3,"sources":["components/common/Paginator/Paginator.module.css","../node_modules/classnames/index.js","components/common/Paginator/Paginator.jsx","components/Users/User.jsx","components/Users/Users.jsx","../node_modules/reselect/es/index.js","redux/users-selectors.js","components/Users/UsersContainer.jsx"],"names":["module","exports","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","key","call","join","default","Paginator","totalUsersCount","pageSize","currentPage","onPageChanged","portionSize","pagesCount","Math","ceil","pages","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","useEffect","className","cn","s","pogination","poginatorButton","onClick","filter","p","map","selectedPage","pageNumber","User","props","u","user","UserImg","to","id","userPhoto","src","photos","small","iconImg","alt","UserInfo","UserName","name","UserStatus","status","UserFollow","authorizedUserId","followed","UserFollowUnfol","disabled","isAuth","followingInProgress","some","unfollow","UserFollowFol","follow","Users","usersWrapper","isFetching","usersPreloaderBlock","usersPreloader","Preloader","users","defaultEqualityCheck","a","b","areArgumentsShallowlyEqual","equalityCheck","prev","next","getDependencies","funcs","dependencies","every","dep","dependencyTypes","Error","createSelector","memoize","_len","memoizeOptions","_key","_len2","_key2","recomputations","resultFunc","pop","memoizedResultFunc","undefined","concat","selector","params","resetRecomputations","createSelectorCreator","func","lastArgs","lastResult","getUsersSuperSelector","state","usersPage","getUsers","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","getIsAuth","auth","UsersAPIComponent","requestUsers","this","toggleFollowingProgress","React","Component","mapDispatchToProps","setCurrentPage","UsersContainer","compose","connect","userId"],"mappings":"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","file":"static/js/7.17ba4e9d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectedPage\":\"Paginator_selectedPage__2oU5Y\",\"pogination\":\"Paginator_pogination__oF_EG\",\"pageNumber\":\"Paginator_pageNumber__29o1y\",\"poginatorButton\":\"Paginator_poginatorButton__37JXT\"};","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg) && arg.length) {\n        var inner = classNames.apply(null, arg);\n\n        if (inner) {\n          classes.push(inner);\n        }\n      } else if (argType === 'object') {\n        for (var key in arg) {\n          if (hasOwn.call(arg, key) && arg[key]) {\n            classes.push(key);\n          }\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames.default = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();","import React, {useState, useEffect} from 'react';\r\nimport s from \"./Paginator.module.css\";\r\nimport cn from \"classnames\";\r\n\r\n\r\nlet Paginator = ({totalUsersCount, pageSize, currentPage, onPageChanged, portionSize = 10}) => {\t\r\n\tlet pagesCount = Math.ceil(totalUsersCount / pageSize);\r\n\tlet pages = [];\r\n\tfor (let i = 1; i <= pagesCount; i++) {\r\n\t  pages.push(i);\r\n\t}\r\n\r\n\tlet portionCount = Math.ceil(pagesCount / portionSize);\r\n\tlet [portionNumber, setPortionNumber] = useState(1);\r\n\tlet leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n\tlet rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n\tuseEffect(() => {\r\n    setPortionNumber(Math.ceil(currentPage / portionSize));\r\n  }, [currentPage, portionSize]);\r\n\t\r\n\treturn (\r\n\t\t<div className={cn(s.pogination /* и через запятую можно писать\r\n\t\t классы, так будет намного удобнее с библиотекой cn*/)}>\r\n\t\t\t{ portionNumber > 1 &&\r\n\t\t\t  <button className={s.poginatorButton} onClick={() => { setPortionNumber(portionNumber - 1) }}>\r\n\t\t\t\t\tPREV</button> \r\n\t\t\t}\r\n\r\n\t\t\t{pages\r\n\t\t\t\t.filter(p => p >= leftPortionPageNumber && p<=rightPortionPageNumber)\r\n\t\t\t\t.map((p) => {\r\n\t\t\t\treturn(\r\n\t\t\t\t\t<span className={ cn({[s.selectedPage]:\r\n\t\t\t\t  currentPage === p}, s.pageNumber) }\r\n\t\t\t\t\tkey={p}\r\n\t\t\t\t\tonClick={() => {onPageChanged(p)}}>{p}</span>\r\n\t\t\t\t)\r\n\t\t\t})}\t\t\t\r\n\r\n\t\t\t{ portionCount > portionNumber &&\r\n\t\t\t  <button className={s.poginatorButton} onClick={() => { setPortionNumber(portionNumber + 1) }}>\r\n\t\t\t\t\tNEXT</button> \r\n\t\t\t}\r\n\t</div>\r\n\t)\r\n}\r\n\r\n\r\nexport default Paginator;\r\n\r\n\r\n","import React from 'react';\r\nimport s from './Users.module.css';\r\nimport iconImg from '../../assets/user.svg';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\n\r\nconst noInfo = \"no information\";\r\n\r\nlet User = (props) => {\r\n\tlet u = props.user;\r\n\r\n\t return (\r\n\t\t\t<div className={s.User}>\t\t\t\t \t\r\n\t\t\t\t<div className={s.UserImg}>\r\n\t\t\t\t\t<NavLink to={'/profile/' + u.id}>\r\n\t\t\t\t\t\t\t<img className={s.userPhoto} src={ u.photos.small != null \r\n\t\t\t\t\t\t\t? u.photos.small \r\n\t\t\t\t\t\t\t: iconImg } alt=\"icon\"/>\r\n\t\t\t\t\t</NavLink>\t\t\t\t \t\t\t\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={s.UserInfo}>\r\n\t\t\t\t\t<div className={s.UserName}>{u.name}</div>\r\n\t\t\t\t\t<div className={s.UserStatus}>{u.status ? `\"${u.status}\"` : `\"${noInfo}\"`}</div>\r\n\t\t\t\t\t<div className={s.UserFollow}>\r\n\t\t\t\t\t\t{props.authorizedUserId !== u.id\r\n\t\t\t\t\t\t? u.followed \r\n\t\t\t\t\t\t\t? <button className={s.UserFollowUnfol} disabled={!props.isAuth ? true : props.followingInProgress.some(id => id === u.id)} \r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={()=>{props.unfollow(u.id)}}>Unfollow\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t: <button className={s.UserFollowFol} disabled={!props.isAuth ? true : props.followingInProgress.some(id => id === u.id)} \r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={()=>{props.follow(u.id)}}>Follow\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t: <div>(It's you!)</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n}\r\n\r\nexport default User;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport Paginator from '../common/Paginator/Paginator';\r\nimport User from './User';\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport s from './Users.module.css';\r\n\r\n\r\nlet Users = (props) => {\r\n\t return (\r\n\t\t\t<div className={s.usersWrapper}>\r\n\t\t\t\t<Paginator totalUsersCount={props.totalUsersCount}\r\n                   pageSize={props.pageSize}\r\n                   currentPage={props.currentPage}\r\n                   onPageChanged={props.onPageChanged} />\r\n\r\n\t\t\t\t{props.isFetching \r\n        ? <div className={s.usersPreloaderBlock}>\r\n\t\t\t\t\t\t<div className={s.usersPreloader}>\r\n\t\t\t\t\t\t\t<Preloader />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>  \r\n        : props.users.map(u =>\r\n\t\t\t\t  <User user={u} follow={props.follow}\r\n\t\t\t\t\t\t\t\tunfollow={props.unfollow}\r\n\t\t\t\t\t\t\t\tisAuth={props.isAuth}\r\n\t\t\t\t\t\t\t\tauthorizedUserId={props.authorizedUserId}\r\n\t\t\t\t\t\t\t\tfollowingInProgress={props.followingInProgress}\r\n\t\t\t\t\t\t\t\tkey={u.id}/>)\r\n\t\t\t\t}\r\n\r\n\t\t\t</div>\r\n\t\t);\r\n}\r\n\r\n\r\nexport default Users;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  } // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n\n\n  var length = prev.length;\n\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n  var lastArgs = null;\n  var lastResult = null; // we reference arguments instead of spreading them for performance reasons\n\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++; // apply arguments instead of spreading for performance.\n\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions)); // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      } // apply arguments instead of spreading for performance.\n\n\n      return memoizedResultFunc.apply(null, params);\n    });\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n\n    selector.recomputations = function () {\n      return recomputations;\n    };\n\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n\n    return selector;\n  };\n}\nexport var createSelector = createSelectorCreator(defaultMemoize);\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","import {createSelector} from \"reselect\";\r\n\r\n\r\nconst getUsers = (state) => {\r\n  return state.usersPage.users;\r\n}\r\nconst getUsersSelector = (state) => {\r\n  return getUsers(state);\r\n}\r\nexport const getUsersSuperSelector = \r\n  createSelector(getUsersSelector, (users) => {\r\n    return users.filter(() => true);\r\n  }); // используем библиотеку reselect, для избежания ошибок\r\n\r\n  \r\nexport const getPageSize = (state) => {\r\n  return state.usersPage.pageSize;\r\n}\r\nexport const getTotalUsersCount = (state) => {\r\n  return state.usersPage.totalUsersCount;\r\n}\r\nexport const getCurrentPage = (state) => {\r\n  return state.usersPage.currentPage;\r\n}\r\nexport const getIsFetching = (state) => {\r\n  return state.usersPage.isFetching;\r\n}\r\nexport const getFollowingInProgress = (state) => {\r\n  return state.usersPage.followingInProgress;\r\n}\r\nexport const getIsAuth = (state) => {\r\n  return state.auth.isAuth;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport Users from './Users';\r\nimport {connect} from 'react-redux';\r\nimport {follow, unfollow,\r\n  setCurrentPage, toggleFollowingProgress, \r\n  requestUsers} from '../../redux/users-reducer'; \r\nimport {getUsersSuperSelector,\r\n  getPageSize, getTotalUsersCount,\r\n  getCurrentPage, getIsFetching,\r\n  getFollowingInProgress, getIsAuth} from '../../redux/users-selectors'; \r\nimport {compose} from 'redux';\r\n\r\n\r\nclass UsersAPIComponent extends React.Component { \r\n  componentDidMount() {\r\n    this.props.requestUsers(this.props.currentPage, this.props.pageSize, true);\r\n  }\r\n\r\n  onPageChanged = (pageNumber) => {\r\n    this.props.requestUsers(pageNumber, this.props.pageSize, true);\r\n  }\r\n\r\n\trender(){\r\n    return (\r\n      <>\r\n        {<Users  totalUsersCount={this.props.totalUsersCount}\r\n                  pageSize={this.props.pageSize}\r\n                  isAuth={this.props.isAuth}\r\n                  isFetching={this.props.isFetching }\r\n                  currentPage={this.props.currentPage}\r\n                  onPageChanged={this.onPageChanged}\r\n                  users={this.props.users}\r\n                  follow={this.props.follow}\r\n                  unfollow={this.props.unfollow}\r\n                  authorizedUserId={this.props.authorizedUserId}\r\n                  toggleFollowingProgress={this.props.toggleFollowingProgress}\r\n                  followingInProgress={this.props.followingInProgress}/>}\r\n      </>\r\n    );\r\n\t}\r\n}\r\n\r\n\r\nlet mapStateToProps = (state) => {\r\n  return {\r\n    users: getUsersSuperSelector(state),\r\n    pageSize: getPageSize(state),\r\n    totalUsersCount: getTotalUsersCount(state),\r\n    currentPage: getCurrentPage(state),\r\n    isFetching: getIsFetching(state),\r\n    isAuth: getIsAuth(state),\r\n    followingInProgress: getFollowingInProgress(state),\r\n    authorizedUserId: state.auth.userId\r\n  }\r\n}\r\nlet mapDispatchToProps = {\r\n  follow,\r\n  unfollow,\r\n  setCurrentPage,\r\n  toggleFollowingProgress,\r\n  requestUsers: requestUsers\r\n}\r\n\r\n// let mapDispatchToProps = (dispatch) => {\r\n//   return {\r\n//     follow(userId) {\r\n//       dispatch(followAC(userId));\r\n//     },\r\n//     unfollow(userId) {\r\n//       dispatch(unfollowAC(userId));      \r\n//     }\r\n//   }\r\n// }\r\n\r\n/*Сократили код с диспачами, если одинаковое название, то можно\r\nсократить до одного слова (flow: flow = flow),\r\n\r\nФункция mapDispatchToProps разрастается. \r\nПо факту мы в колбэках что делаем? принимаем параметр, \r\nделегируем его экшен-криейтору и дальше полученный экшен диспатчим!\r\n\r\nТак вот, если оно так, то можно сократить код, \r\nпередавая вторым параметром в функцию \r\nconnect не функцию mapDispatchToProps, а передавая просто объект, \r\nсостоящий из экшенКриейторов! как-то так))*/\r\n\r\n\r\n\r\nconst UsersContainer = compose(\r\n\tconnect(mapStateToProps, mapDispatchToProps)\r\n)(UsersAPIComponent)\r\n\r\n\r\nexport default UsersContainer;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":""}